angular.module("capapp.clarity.module",["ngRoute"]).config(["$routeProvider",function(a){a.when("/clarity/index",{templateUrl:"views/clarity/index.html",controller:"indexClarityContoller"}).when("/clarity/form/:weekIndex",{templateUrl:"views/clarity/form.html",controller:"formClarityContoller"}).when("/clarity/select-tasks/:weekIndex",{templateUrl:"views/clarity/selecttasks.html",controller:"formClarityContoller"}).when("/clarity/testfab",{templateUrl:"views/clarity/testfab.html",controller:"testFabContoller"})}]),angular.module("capapp.clarity.module").controller("clarityIndexContoller",["$log","$scope","config","clarityService",function(a,b,c,d){a.debug("init clarityIndexContoller"),b.timesheets=null,d.getTimeSheets().then(function(c){a.debug("Load timesheets tst fab "+c),b.timesheets=c})}]),angular.module("capapp.clarity.module").controller("formClarityContoller",["$log","$scope","$location","$routeParams","config","clarityService","$modal",function(a,b,c,d,e,f,g){a.debug("init formClarityContoller"),b.weekIndex=d.weekIndex,a.debug("de weekindex is : "+d.weekIndex),b.days=["Ma","Di","Wo","Do","Vr","Za","Zo"],f.getTimeSheets().then(function(c){a.debug("Load timesheets"+c),b.timesheets=c;var d;for(d=0;d<b.timesheets.length;d++)b.timesheets[d].startDate=Date.parse(b.timesheets[d].startDate),b.timesheets[d].endDate=Date.parse(b.timesheets[d].endDate)}),b.goToMain=function(){a.debug("fab clicked goto main"),c.path("/clarity/index")},b.items=[{pDesc:"LISA Sep Dec 2014",pCode:"1"},{pDesc:"Holiday",pCode:"2"},{pDesc:"Annual Leave",pCode:"3"},{pDesc:"Shadow Billing",pCode:"4"},{pDesc:"Com Off",pCode:"5"}],b.openTasks=function(c){a.debug("openTasks");var d=g.open({templateUrl:"myModalContent.html",controller:h,size:c,resolve:{items:function(){return b.items}}});d.result.then(function(a){b.selected=a},function(){a.info("Modal dismissed at: "+new Date)})};var h=function(a,b,c){a.items=c,a.selected={item:a.items[0]},a.ok=function(){b.close(a.selection)},a.cancel=function(){b.dismiss("cancel")},a.selection=[],a.toggleSelection=function(b){var c=a.selection.indexOf(b);c>-1?a.selection.splice(c,1):a.selection.push(b)}};h.$inject=["$scope","$modalInstance","items"],b.selection=[],b.toggleSelection=function(a){var c=b.selection.indexOf(a);c>-1?b.selection.splice(c,1):b.selection.push(a)},b.selPrjData=[],b.selTimeSheet=[],b.onSelectProject=function(c,d){a.debug("-->"+d.startDate),a.debug("S-->"+d.status),b.selPrjData.length=0,b.selectedTasks.length=0;var e=b.selPrjData.indexOf(c);e>-1?b.selPrjData.splice(e,1):b.selPrjData.push(c);var f=b.selTimeSheet.indexOf(d);f>-1?b.selTimeSheet.splice(f,1):b.selTimeSheet.push(d)},b.selectedTasks=[],b.toggleTasksSelection=function(a){var c=b.selectedTasks.indexOf(a);c>-1?b.selectedTasks.splice(c,1):b.selectedTasks.push(a)},b.showSelectedTasks=function(){a.debug("Project Desc: 1[] "+b.selPrjData[0].projectdesc),a.debug("Project Code: 1[] "+b.selPrjData[0].projectcode),a.debug("selTimeSheet: 1[] "+b.selTimeSheet[0].status),b.selTimeSheet[0].status="Submitted",a.debug("selTimeSheet: 2[] "+b.selTimeSheet[0].status);var c;for(c=0;c<b.selectedTasks.length;c++){var d=b.selectedTasks[c].taskdesc;a.debug("Tdesc:   "+d)}alert("Time Sheets Submitted")},b.navigateToAgenda=function(){a.debug(" navigateToAgenda "),c.path("/agenda/agendaHome")},b.enteredHours=function(){var a;for(a=0;a<b.selectedTasks.length;a++){var c=b.selectedTasks[a].weekdays[0].MonHours,d=b.selectedTasks[a].weekdays[1].TueHours,e=b.selectedTasks[a].weekdays[2].WedHours,f=b.selectedTasks[a].weekdays[3].ThrHours,g=b.selectedTasks[a].weekdays[4].FriHours,h=b.selectedTasks[a].weekdays[5].SatHours,i=b.selectedTasks[a].weekdays[6].SunHours;b.selectedTasks[a].totalhours=c+d+e+f+g+h+i}}}]),angular.module("capapp.clarity.module").controller("indexClarityContoller",["$log","$scope","$location","config","clarityService",function(a,b,c,d,e){a.debug("init indexClarityContoller"),b.timesheets=null,e.getTimeSheets().then(function(c){a.debug("Load timesheets "+c),b.timesheets=c;var d;for(d=0;d<b.timesheets.length;d++)b.timesheets[d].startDate=Date.parse(b.timesheets[d].startDate),b.timesheets[d].endDate=Date.parse(b.timesheets[d].endDate)}),b.goToForm=function(d){a.debug("periodId goToForm fabian = "+d);var e,f;for(f=0;f<b.timesheets.length;f++)b.timesheets[f].periodId==d&&(e=f);a.debug("selectedTimesheetIndex fabje = "+e),c.path("/clarity/select-tasks/"+e)}}]),angular.module("capapp.clarity.module").controller("testFabContoller",["$log","$scope","$location","$routeParams","config","clarityService",function(a,b,c,d,e,f){a.debug("init testFabContoller")}]),angular.module("directivesClarityApp",[]).directive("numbersOnly",function(){return{require:"ngModel",link:function(a,b,c,d){d.$parsers.push(function(a){if(void 0===a)return"";var b=a.replace(/[^0-9]/g,"");return b!==a&&(d.$setViewValue(b),d.$render()),b})}}}).directive("starRating",function(){return{restrict:"A",template:'<ul class="rating">	<li ng-repeat="star in stars" ng-class="star" ng-click="toggle($index)"> â˜… </li></ul>',scope:{ratingValue:"=",max:"=",onRatingSelected:"&"},link:function(a,b,c){var d=function(){a.stars=[];for(var b=0;b<a.max;b++)a.stars.push({filled:b<a.ratingValue})};a.toggle=function(b){a.ratingValue=b+1,a.onRatingSelected({rating:b+1})},a.$watch("ratingValue",function(a,b){b&&d()})}}}),angular.module("mobile-angular-ui.directives.overlay",[]).directive("overlay",["$compile",function(a){return{compile:function(b,c){var d=b.html();return function(b,c,e){var f="",g=d,h=e.overlay;null!==e["default"]&&(f="default='"+e["default"]+"'");var i='<div class="overlay" id="'+h+'" toggleable '+f+' parent-active-class="overlay-in" active-class="overlay-show">\n  <div class="overlay-inner">\n    <div class="overlay-background"></div>\n    <a href="#'+h+'" toggle="off" class="overlay-dismiss">\n      <i class="fa fa-times-circle-o"></i>\n    </a>\n    <div class="overlay-content">\n      <div class="overlay-body">\n        '+g+"\n      </div>\n    </div>\n  </div>\n</div>";c.remove();var j=angular.element(document.getElementById(h));j.length>0&&j.hasClass("overlay")&&j.remove(),g=angular.element(document.body),g.prepend(a(i)(b)),"active"===e["default"]&&g.addClass("overlay-in")}}}}]),angular.module("capapp.clarity.module").service("clarityService",["$q","$http","config",function(a,b,c){this.getTimeSheets=function(){var d=a.defer();return b.get(c.clarity.url+"/timesheets").success(function(a,b,c,e){d.resolve(a)}).error(function(a,b,c,e){d.reject()}),d.promise}}]);